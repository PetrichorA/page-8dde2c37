"use strict";function CheckLocation(){var e="#go_to_message",t=location.hash;if(t.substr(0,e.length)==e){var o=parseInt(t.substr(e.length));o&&GoToMessage(o)}else"#allow_back"==t&&(window.AllowBackFromHistory=!0)}function ShowToast(e){var t=document.createElement("div");t.className="toast_container";var o=t.appendChild(document.createElement("div"));o.className="toast_body",o.appendChild(document.createTextNode(e));var n=document.body.appendChild(t);setTimeout((function(){AddClass(n,"toast_shown"),setTimeout((function(){RemoveClass(n,"toast_shown"),setTimeout((function(){document.body.removeChild(n)}),3e3)}),3e3)}),0)}function ShowHashtag(e){return ShowToast("This is a hashtag '#"+e+"' link."),!1}function ShowCashtag(e){return ShowToast("This is a cashtag '$"+e+"' link."),!1}function ShowBotCommand(e){return ShowToast("This is a bot command '/"+e+"' link."),!1}function ShowMentionName(){return ShowToast("This is a link to a user mentioned by name."),!1}function AddClass(e,t){var o=e.className;new RegExp("(^|\\s)"+t+"(\\s|$)","g").test(o)||(e.className=o+" "+t)}function RemoveClass(e,t){for(var o=e.className,n=new RegExp("(^|\\s)"+t+"(\\s|$)",""),s=n.exec(o);null!=(s=n.exec(o));)o=s[1].length>0&&s[2].length>0?o.substr(0,s.index+s[1].length)+o.substr(s.index+s[0].length):o.substr(0,s.index)+o.substr(s.index+s[0].length);e.className=o}function EaseOutQuad(e){return e*e}function EaseInOutQuad(e){return e<.5?2*e*e:(4-2*e)*e-1}function ScrollHeight(){return"innerHeight"in window?window.innerHeight:document.documentElement?document.documentElement.clientHeight:document.body.clientHeight}function ScrollTo(e,t){var o=document.documentElement,n=o.scrollTop,s=e-n,a=function(){o.scrollTop=e,t&&t()};if(window.performance.now&&0!=s){var i=EaseOutQuad;s<-300?(n=e+300,s=-300):s>300?(n=e-300,s=300):i=EaseInOutQuad;var r=window.performance.now(),c=function(){var e=window.performance.now();if(e>=r+150)a();else{var t=(e-r)/150;o.scrollTop=Math.round(n+s*i(t)),setTimeout(c,7)}};setTimeout(c,7)}else a()}function ScrollToElement(e,t){var o=document.getElementsByClassName("page_header")[0].offsetHeight,n=document.documentElement,s=ScrollHeight(),a=s-o,i=e.offsetTop,r=e.offsetHeight,c=i-Math.max((a-r)/2,10)-o,l=n.offsetHeight-s;ScrollTo(Math.min(c,l),t)}function GoToMessage(e){var t=document.getElementById("message"+e);if(t){var o="#go_to_message"+e;location.hash!=o&&(location.hash=o),ScrollToElement(t,(function(){AddClass(t,"selected"),setTimeout((function(){RemoveClass(t,"selected")}),1e3)}))}else ShowToast("This message was not exported. Maybe it was deleted.");return!1}function GoBack(e){if(!window.AllowBackFromHistory)return!0;if(history.back(),!e||!e.getAttribute)return!0;var t=e.getAttribute("href");return!t||(setTimeout((function(){location.href=t}),100),!1)}window.AllowBackFromHistory=!1;